<?php
require_once('cls_conexion.model.php');
class Clase_Proyectosit
{
    public function todos()
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "SELECT * FROM `proyectosit`";
            $result = mysqli_query($con, $cadena);
            return $result;
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
    public function uno($ID_proyecto)
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "SELECT * FROM `proyectosit` WHERE ID_proyecto=$ID_proyecto";
            $result = mysqli_query($con, $cadena);
            return $result;
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
    public function insertar($Nombre, $Tecnologia, $Fecha_inicio, $Fecha_fin)
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "INSERT INTO `proyectosit`(`Nombre`,`Tecnologia`,`Fecha_inicio`,`Fecha_fin`) VALUES ('$Nombre','$Tecnologia','$Fecha_inicio','$Fecha_fin')";
            $result = mysqli_query($con, $cadena);
            return 'ok';
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
    public function actualizar($ID_proyecto, $Nombre, $Tecnologia, $Fecha_inicio, $Fecha_fin)
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "UPDATE `proyectosit` SET `Nombre`='$Nombre', `Tecnologia`='$Tecnologia',`Fecha_inicio`='$Fecha_inicio',`Fecha_fin`='$Fecha_fin' WHERE `ID_proyecto`='$ID_proyecto'";
            $result = mysqli_query($con, $cadena);
            return "ok";
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
    public function eliminar($ID_proyecto)
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "DELETE FROM `proyectosit` WHERE `ID_proyecto`='$ID_proyecto'";
            $result = mysqli_query($con, $cadena);
            return "ok";
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
    public function verificar_Tecnologia($Tecnologia, $ID_proyecto)
    {
        try {
            $con = new Clase_Conectar_Base_Datos();
            $con = $con->ProcedimientoConectar();
            $cadena = "SELECT count(*) as Tecnologia_repetida FROM `proyectosit` WHERE `Tecnologia`= '$Tecnologia' and `ID_proyecto` = '$ID_proyecto'";
            //echo $cadena;
            $result = mysqli_query($con, $cadena);
            return $result;
        } catch (Throwable $th) {
            return $th->getMessage();
        } finally {
            $con->close();
        }
    }
}
